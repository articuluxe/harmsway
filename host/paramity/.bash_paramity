# -*- Mode: sh -*-
# .bash_viking

export VISUAL="ec"
export EDITOR="et"
# alias emacs="\$EDITOR"

# source the site files
[ -r ~/."$SITE".env ] && . ~/."$SITE".env
[ -r ~/.bash_"$SITE" ] && . ~/.bash_"$SITE"

# ssh keys
SSH_FILE=~/.ssh-agent
HOST=$(hostname -s)
if [ ! -S ~/.ssh/ssh_auth_sock ]; then
    eval `ssh-agent -s`
    ln -sf "$SSH_AUTH_SOCK" ~/.ssh/ssh_auth_sock
    echo "export SSH_AUTH_SOCK=$SSH_AUTH_SOCK" > "$SSH_FILE"
    echo "export SSH_AGENT_PID=$SSH_AGENT_PID" >> "$SSH_FILE"
else
    echo "Loading $SSH_FILE"
    [ -r "$SSH_FILE" ] && . "$SSH_FILE"
fi

ssh-add -l > /dev/null || ssh-add ~/.ssh/"$HOST".ssh.ed25519

use_clang()
{
    export CC=/usr/bin/clang
    export CXX=/usr/bin/clang++
}

use_gcc()
{
    export CC=${CSTDLIB_BIN}/gcc
    export CXX=${CSTDLIB_BIN}/g++
    export CXX_FLAGS="-Wall -Wextra -pedantic -Wno-unused-local-typedefs"
}
