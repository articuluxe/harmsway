# -*- Mode: sh -*-
# .bash_chi-ldbd098

export VISUAL="$EMACS_ROOT"/bin/emacs
export EDITOR="$VISUAL -nw"
alias emacs="\$EDITOR"

# NOT sourcing the site file

export TERM=xterm-24bit

export CONTAINER=centos_6~f27_1.1.0~onload_201805~v_5.1~development.simg
alias xrdev="singularity shell -B /net,/opt/xr,/opt/xr_job_agent,/opt/1tick,/fry,/data,/shared -s /bin/bash ~/containers/$CONTAINER"

run_in_container()
{
    "$HOME"/snap/snap/start_container.sh "$HOME"/bin/run-in-container.sh $1
}

build_in_container()
{
    run_in_container "python -m xrmake2"
}

upgrade_simutils()
{
    cd "$HOME"/london_utils || exit
    pip install . --upgrade
    if [ $? -ne 0 ]; then
        echo "Error updating london_utils; stopping..."
    else
        echo "Updated london_utils"
        cd "$HOME"/simulation_utils || exit
        pip install . --upgrade
        if [ $? -ne 0 ]; then
            echo "Error updating simulation_utils; stopping..."
        else
            "Updated simulation_utils"
        fi
    fi
}

use_gcc()
{
   export CC=$CSTDLIB_BIN/gcc
   export CXX=$CSTDLIB_BIN/g++
   export CXX_FLAGS="-Wall -Wextra -pedantic -Wno-unused-local-typedefs"
}

use_gcc

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/fry/home/dan.harms/anaconda3/bin/conda' 'shell.bash' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/fry/home/dan.harms/anaconda3/etc/profile.d/conda.sh" ]; then
        . "/fry/home/dan.harms/anaconda3/etc/profile.d/conda.sh"
    else
        export PATH="/fry/home/dan.harms/anaconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<
